<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>YouTube Summarizer Demo</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
  </head>
  <body>
    <main class="container">

        <!-- Screen 1: Home -->
        <section id="screen-home" class="screen">
          <form id="url-form" class="home-form">
            <label for="url-input">YouTube URL</label>
            <input id="url-input" name="url" type="url" placeholder="https://www.youtube.com/watch?v=..." required />
            <button id="run-btn" type="submit">Run</button>
          </form>

          <section id="history" class="history">
            <h2 class="history-title">Recent Summaries</h2>
            <div id="history-list" class="history-list" aria-live="polite"></div>
            <p id="history-empty" class="muted hidden">No history yet. Run a summary to see it here.</p>
            <button id="history-load-more" type="button" class="secondary hidden">Load more</button>
          </section>
        </section>

        <!-- Screen 2: Loading -->
        <section id="screen-loading" class="screen hidden">
          <div class="loading-wrap">
            <p class="muted">Working on it. This can take a moment.</p>
            
            <!-- Lottie Animation Container -->
            <div class="loading-animation">
              <div id="lottie-container"></div>
            </div>
            
            <!-- Collapsible Progress Container -->
            <div class="progress-container">
              <button id="progress-toggle" class="progress-toggle" type="button">
                <span>Show Progress Details</span>
                <span class="toggle-icon">â–¼</span>
              </button>
              <div id="progress-details" class="progress-details hidden">
                <ul class="progress-list">
                  <li>
                    <span>1. Get video details</span>
                    <span id="spin-metadata" class="spinner" aria-hidden="true"></span>
                  </li>
                  <li>
                    <span>2. Extract video id</span>
                    <span id="spin-videoid" class="spinner" aria-hidden="true"></span>
                  </li>
                  <li>
                    <span>3. Fetch transcript</span>
                    <span id="spin-transcript" class="spinner" aria-hidden="true"></span>
                  </li>
                  <li>
                    <span>4. Summarize transcript</span>
                    <span id="spin-summary" class="spinner" aria-hidden="true"></span>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <!-- Screen 3: Results -->
        <section id="screen-results" class="screen hidden">
          <div class="results-grid">
            <aside class="results-left">
              <div class="thumb-wrap">
                <a id="result-title-link" href="#" target="_blank" rel="noopener noreferrer">
                  <img id="result-thumb" alt="Video thumbnail" />
                </a>
              </div>
              <div class="meta">
                <div class="meta-title">
                  <a id="result-title-link-text" href="#" target="_blank" rel="noopener noreferrer"></a>
                </div>
                <div class="meta-channel">
                  <a id="result-channel-link" href="#" target="_blank" rel="noopener noreferrer"></a>
                </div>
              </div>
              <hr>
              <div class="results-actions">
                <button id="home-btn" type="button" class="secondary">Home</button>
                <button id="print-btn" type="button" class="secondary">Print Summary</button>
              </div>
            </aside>
            <section class="results-right">
              <div id="result-summary" class="md"></div>
            </section>
          </div>
        </section>

        <!-- Screen 4: Error -->
        <section id="screen-error" class="screen hidden">
          <div class="error-wrap">
            <h2>Something went wrong</h2>
            <p id="error-message" class="error-message"></p>
            <pre id="error-details" class="pre error-details"></pre>
          </div>
        </section>
      </main>

    <script src="script.js"></script>
  </body>
</html>